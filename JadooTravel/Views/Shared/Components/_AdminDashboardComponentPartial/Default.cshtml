@model GraficDestinationDto

@{
	var labels = new[] { "Testimonials", "Bookings", "Categories" };
	var colors = new[] { "bg-primary", "bg-danger", "bg-success" };
}

<div class="row">
	<div class="col-lg-8 d-flex align-items-strech">
		<div class="card w-100">
			<div class="card-body">
				<div class="d-flex align-items-center justify-content-between mb-1">
					<div class="">
						<h5 class="card-title fw-semibold">Turların Kapasitesi & Ücretleri</h5>
					</div>
					<div class="dropdown">
						<button id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
								class="rounded-circle btn-transparent rounded-circle btn-sm px-1 btn shadow-none">
							<i class="ti ti-dots-vertical fs-7 d-block"></i>
						</button>
						<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton1">
							<li><a class="dropdown-item" href="#">Action</a></li>
							<li>
								<a class="dropdown-item" href="#">Another action</a>
							</li>
							<li>
								<a class="dropdown-item" href="#">Something else here</a>
							</li>
						</ul>
					</div>
				</div>
				<div id="profit"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="row">
			<div class="col-lg-12 col-sm-6">
				<!-- Yearly Breakup -->
				<div class="card overflow-hidden">
					<div class="card-body p-4">
						<h5 class="card-title mb-10 fw-semibold">Hızlı Bakış</h5>
						<div class="row align-items-center">
							<div class="col-7">
								<div class="d-flex flex-column">
									@for (int i = 0; i < labels.Length; i++)
									{
										<div class="d-flex align-items-center mb-2">
											<span class="round-8 @colors[i] rounded-circle me-2 d-inline-block"></span>
											<span class="">@labels[i]</span>
										</div>
									}
								</div>
							</div>
							<div class="col-5">
								<div class="d-flex justify-content-center">
									<div id="grade"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-12 col-sm-6">
				<!-- Monthly Earnings -->
				<div class="card">
					<div class="card-body">
						<div class="row alig n-items-start">
							<div class="col-8">
								<h5 class="card-title mb-10 fw-semibold"> Testimonials-Bookings-Categories Count</h5>
								<h4 class="mb-3">Gelişim Grafiği</h4>
							</div>
							<div class="col-4">
								<div class="d-flex justify-content-end">
									<div class="text-white bg-danger rounded-circle p-6 d-flex align-items-center justify-content-center">
										<i class="ti ti-currency-dollar fs-6"></i>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="earning"></div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script>
	document.addEventListener("DOMContentLoaded", function () {
		// Profit & Expenses (Bar Chart)
		var profitOptions = {
			chart: { type: 'bar', height: 350, toolbar: { show: false } },
				series: [
					{ name: 'Kapasite', data: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Capacity)) },
					{ name: 'Fiyat', data: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Price)) },
				],
	xaxis: { categories: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.CityCountry)) },
			colors: ['#1E90FF', '#FF7F7F'],
			plotOptions: {
				bar: { columnWidth: '40%', borderRadius: 4 }
			},
			dataLabels: { enabled: false },
			legend: { position: 'top' }
		};
		new ApexCharts(document.querySelector("#profit"), profitOptions).render();

		// Traffic Distribution (Donut)
		var gradeOptions = {
			chart: { type: 'donut', height: 200 },
			series: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.TesResSerList)),
			labels: ['Testimonials', 'Bookings', 'Categories'],
			 colors: ['#1E90FF', '#FF7F7F', '#28a745'],
			legend: { show: false },
			plotOptions: {
				pie: {
					donut: {
						size: '70%',
						labels: {
							show: true,
							total: {
								show: true,
								label: 'Count'
							}
						}
					}
				}
			}
		};
		new ApexCharts(document.querySelector("#grade"), gradeOptions).render();

		// Product Sales (Area Chart)
		var earningOptions = {
			chart: { type: 'area', height: 150, sparkline: { enabled: true } },
				series: [
					{ name: 'TesResSerList', data: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.TesResSerList)) }
				],
			stroke: { curve: 'smooth', width: 2 },
			colors: ['#FF5B5B'],
			fill: { opacity: 0.3 }
		};
		new ApexCharts(document.querySelector("#earning"), earningOptions).render();
	});
</script>